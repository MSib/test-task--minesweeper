import{d as R,r as p,c as z,o as V,a as b,b as f,n as P,e as A,u,t as T,_ as B,s as I,f as E,g as a,F as S,h as M,i as F,w as Y,j as N,v as j,k as G,l as H}from"./index-BsvH3HUK.js";import{M as L,u as $,c as W}from"./main-CGW4LfA2.js";const J=R({__name:"BoardCell",props:{row:{type:Number,required:!0},col:{type:Number,required:!0}},setup(k,{expose:g}){const _=p(null),v=p(""),i=p(!1),l=p(!1),d=p(!1),r=p(void 0),s={none:"",flag:"🚩",maybe:"?"},c=p(s.none),C=z(()=>l.value||c.value===s.maybe?c:v.value==="0"?"":v.value===L.toString()?"💣":v);g({open:t,marked:m,reset:K});const D=$(),{cellClicked:w,toggleFlag:y,incrementFlag:x,decrementFlag:n}=D;function o(){if(d.value){d.value=!1;return}i.value||l.value||w(k.row,k.col)}function e(h){h==null||h.preventDefault(),!i.value&&y(k.row,k.col)}function t(h){if(!l.value)return i.value?!1:(c.value=s.none,v.value=h.toString(),i.value=!0,!0)}function m(){switch(c.value){case s.flag:x(),c.value=s.maybe,l.value=!1;break;case s.maybe:c.value=s.none;break;default:n(),c.value=s.flag,l.value=!0;break}return l.value}function K(){_.value=null,v.value="",i.value=!1,l.value=!1,c.value=s.none}function U(){clearTimeout(r.value),d.value=!1,r.value=setTimeout(()=>{d.value=!0,"vibrate"in navigator&&navigator.vibrate(100),e()},300)}function q(){clearTimeout(r.value)}return V(()=>{}),(h,be)=>(f(),b("button",{onTouchstart:U,onTouchend:q,onClick:o,onContextmenu:e,class:A([{open:i.value,mined:v.value===u(L).toString()&&i.value},"cell"]),style:P(`--cell-color: var(--cell-color-${v.value});`),type:"button",tabindex:"-1",ref_key:"cell",ref:_},T(C.value),39))}}),Q=B(J,[["__scopeId","data-v-9aaefecc"]]),X={class:"board"},Z={class:"bar"},ee={class:"counter",title:"Количество оставшихся флажков"},ae={class:"counter__value"},le={class:"timer",title:"Таймер"},se={class:"timer__value"},te={id:"winnerDialog",class:"dialog",ref:"dialog"},ne={class:"dialog__inner"},oe=R({__name:"GameBoard",setup(k){const g=$(),{toggleDisplayOfSettings:_,setCellsRef:v,setDialogRef:i,restartGame:l,addWinner:d}=g,{selectedMode:r,flagsAvailable:s,timer:c,won:C,gameOver:D}=I(g),w=E("cellRef"),y=E("dialog"),x=E("dialogInput");function n(){y.value&&(y.value.close(),x.value&&d(x.value.value))}return V(()=>{l(),w.value&&v(w.value),i(y.value,x.value)}),(o,e)=>(f(),b("div",X,[a("div",Z,[a("p",ee,[e[2]||(e[2]=a("span",{class:"counter__icon"},"🚩",-1)),a("span",ae,T(u(s)),1)]),a("button",{onClick:e[0]||(e[0]=(...t)=>u(l)&&u(l)(...t)),class:"restart",title:"Перезапуск"},e[3]||(e[3]=[a("span",{class:"restart__icon"},"🔄",-1)])),a("button",{onClick:e[1]||(e[1]=(...t)=>u(_)&&u(_)(...t)),class:"settings",title:"Настройки"},e[4]||(e[4]=[a("span",{class:"settings__icon"},"⚙️",-1)])),a("p",le,[e[5]||(e[5]=a("span",{class:"timer__icon"},"⏱️",-1)),a("span",se,T(u(c)),1)])]),a("div",{class:A([{defeat:u(D)&&!u(C),win:u(C)},"cells"]),style:P(`--columns: ${u(r).cols}`)},[(f(!0),b(S,null,M(u(r).rows,t=>(f(),b(S,{key:t},[(f(!0),b(S,null,M(u(r).cols,m=>(f(),F(Q,{key:u(W)(t,m,u(r).cols),row:t,col:m,ref_for:!0,ref:"cellRef"},null,8,["row","col"]))),128))],64))),128))],6),a("dialog",te,[e[7]||(e[7]=a("p",{class:"dialog__text"},"Вы победили!",-1)),a("div",ne,[e[6]||(e[6]=a("label",{for:"name"},"Введите имя:",-1)),a("input",{onKeyup:Y(n,["enter"]),type:"text",name:"name",id:"name",class:"dialog__input",ref:"dialogInput"},null,544),a("button",{onClick:n,type:"button",class:"dialog__button"},"OK")])],512)]))}}),ue=B(oe,[["__scopeId","data-v-aa08d688"]]),ie={class:"settings"},re={class:"modes"},ce={class:"modes__list"},de={class:"mode"},me=["id","checked","value"],ve=["for"],fe=["disabled"],_e=["onUpdate:modelValue","min","max"],O="custom",pe=R({__name:"GameSettings",setup(k){const g=$(),{modes:_,startGame:v}=g,{selectedMode:i}=I(g),l=p(i.value.name),d=p(i.value.rows),r=p(i.value.cols),s=p(i.value.mines),c=[{name:"rows",label:"Высота",model:d,min:8,max:16},{name:"cols",label:"Ширина",model:r,min:8,max:32},{name:"mines",label:"Мины",model:s,min:10,max:100}];function C(){const n=_.find(o=>o.name===l.value);n&&(d.value=n.rows,r.value=n.cols,s.value=n.mines)}function D(n){/\d/.test(n.key)||n.preventDefault()}function w(n){n.inputType==="insertFromPaste"&&n.preventDefault()}function y(){if(l.value===O){const n=_.find(m=>m.name===l.value),o=c.find(m=>m.name==="rows"),e=c.find(m=>m.name==="cols"),t=c.find(m=>m.name==="mines");n&&o&&e&&t&&(d.value<o.min?d.value=o.min:d.value>o.max&&(d.value=o.max),r.value<e.min?r.value=e.min:r.value>e.max&&(r.value=e.max),s.value<t.min?s.value=t.min:s.value>t.max&&(s.value=t.max))}}function x(){y(),v({mode:l.value,rows:d.value,cols:r.value,mines:s.value})}return(n,o)=>(f(),b("div",ie,[a("section",re,[o[1]||(o[1]=a("h2",{class:"modes__title"},"Уровень сложности",-1)),a("ul",ce,[(f(!0),b(S,null,M(u(_),e=>(f(),b("li",de,[N(a("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>l.value=t),id:e.name,checked:e.name===u(i).name,value:e.name,onChange:C,name:"mode",type:"radio",class:"mode__input"},null,40,me),[[j,l.value]]),a("label",{for:e.name,class:"mode__label"},T(e.label),9,ve)]))),256))]),a("fieldset",{class:"modes__details details",disabled:l.value!==O},[(f(),b(S,null,M(c,(e,t)=>a("label",{key:t,class:"details__label"},[G(T(e.label),1),N(a("input",{"onUpdate:modelValue":m=>e.model.value=m,onKeypress:D,onBeforeinput:w,onFocusout:y,class:"details__input",type:"number",min:e.min,max:e.max},null,40,_e),[[H,e.model.value,void 0,{number:!0}]])])),64))],8,fe)]),a("button",{onClick:x,class:"play"},o[2]||(o[2]=[a("span",{class:"play__icon"},"🎮",-1),G("Играть")]))]))}}),ge=B(pe,[["__scopeId","data-v-cd43b471"]]),xe=R({__name:"HomeView",setup(k){const g=$(),{settingsAreDisplayed:_}=I(g);return(v,i)=>u(_)?(f(),F(ge,{key:1})):(f(),F(ue,{key:0}))}});export{xe as default};
