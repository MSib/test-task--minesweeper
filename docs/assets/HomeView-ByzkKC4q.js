import{d as F,r as p,c as L,o as O,a as g,b as m,n as K,e as U,u as i,t as $,_ as I,s as V,f as S,g as l,F as M,h,i as B,w as q,j as N,v as z,k as T,l as A}from"./index-ZMMoPfMI.js";import{M as E,u as R,c as P}from"./main-BWozx8Ay.js";const j=F({__name:"BoardCell",props:{row:{type:Number,required:!0},col:{type:Number,required:!0}},setup(k,{expose:_}){const v=p(null),d=p(""),c=p(!1),a=p(!1),t={none:"",flag:"🚩",maybe:"?"},s=p(t.none),f=L(()=>a.value||s.value===t.maybe?s:d.value==="0"?"":d.value===E.toString()?"💣":d);_({open:u,marked:e,reset:n});const b=R(),{cellClicked:C,toggleFlag:D,incrementFlag:w,decrementFlag:y}=b;function x(){c.value||a.value||C(k.row,k.col)}function o(r){r.preventDefault(),!c.value&&D(k.row,k.col)}function u(r){if(!a.value)return c.value?!1:(s.value=t.none,d.value=r.toString(),c.value=!0,!0)}function e(){switch(s.value){case t.flag:w(),s.value=t.maybe,a.value=!1;break;case t.maybe:s.value=t.none;break;default:y(),s.value=t.flag,a.value=!0;break}return a.value}function n(){v.value=null,d.value="",c.value=!1,a.value=!1,s.value=t.none}return O(()=>{}),(r,fe)=>(m(),g("button",{onClick:x,onContextmenu:o,class:U([{open:c.value,mined:d.value===i(E).toString()&&c.value},"cell"]),style:K(`--cell-color: var(--cell-color-${d.value});`),type:"button",tabindex:"-1",ref_key:"cell",ref:v},$(f.value),39))}}),H=I(j,[["__scopeId","data-v-905a964f"]]),W={class:"board"},J={class:"bar"},Q={class:"counter",title:"Количество оставшихся флажков"},X={class:"counter__value"},Y={class:"timer",title:"Таймер"},Z={class:"timer__value"},ee={id:"winnerDialog",class:"dialog",ref:"dialog"},le={class:"dialog__inner"},se=F({__name:"GameBoard",setup(k){const _=R(),{toggleDisplayOfSettings:v,setCellsRef:d,setDialogRef:c,restartGame:a,addWinner:t}=_,{selectedMode:s,flagsAvailable:f,timer:b,won:C,gameOver:D}=V(_),w=S("cellRef"),y=S("dialog"),x=S("dialogInput");function o(){y.value&&(y.value.close(),x.value&&t(x.value.value))}return O(()=>{a(),w.value&&d(w.value),c(y.value,x.value)}),(u,e)=>(m(),g("div",W,[l("div",J,[l("p",Q,[e[2]||(e[2]=l("span",{class:"counter__icon"},"🚩",-1)),l("span",X,$(i(f)),1)]),l("button",{onClick:e[0]||(e[0]=(...n)=>i(a)&&i(a)(...n)),class:"restart",title:"Перезапуск"},e[3]||(e[3]=[l("span",{class:"restart__icon"},"🔄",-1)])),l("button",{onClick:e[1]||(e[1]=(...n)=>i(v)&&i(v)(...n)),class:"settings",title:"Настройки"},e[4]||(e[4]=[l("span",{class:"settings__icon"},"⚙️",-1)])),l("p",Y,[e[5]||(e[5]=l("span",{class:"timer__icon"},"⏱️",-1)),l("span",Z,$(i(b)),1)])]),l("div",{class:U([{defeat:i(D)&&!i(C),win:i(C)},"cells"]),style:K(`--columns: ${i(s).cols}`)},[(m(!0),g(M,null,h(i(s).rows,n=>(m(),g(M,{key:n},[(m(!0),g(M,null,h(i(s).cols,r=>(m(),B(H,{key:i(P)(n,r,i(s).cols),row:n,col:r,ref_for:!0,ref:"cellRef"},null,8,["row","col"]))),128))],64))),128))],6),l("dialog",ee,[e[7]||(e[7]=l("p",{class:"dialog__text"},"Вы победили!",-1)),l("div",le,[e[6]||(e[6]=l("label",{for:"name"},"Введите имя:",-1)),l("input",{onKeyup:q(o,["enter"]),type:"text",name:"name",id:"name",class:"dialog__input",ref:"dialogInput"},null,544),l("button",{onClick:o,type:"button",class:"dialog__button"},"OK")])],512)]))}}),ae=I(se,[["__scopeId","data-v-aa08d688"]]),te={class:"settings"},ne={class:"modes"},oe={class:"modes__list"},ue={class:"mode"},ie=["id","checked","value"],re=["for"],ce=["disabled"],de=["onUpdate:modelValue","min","max"],G="custom",me=F({__name:"GameSettings",setup(k){const _=R(),{modes:v,startGame:d}=_,{selectedMode:c}=V(_),a=p(c.value.name),t=p(c.value.rows),s=p(c.value.cols),f=p(c.value.mines),b=[{name:"rows",label:"Высота",model:t,min:8,max:16},{name:"cols",label:"Ширина",model:s,min:8,max:32},{name:"mines",label:"Мины",model:f,min:10,max:100}];function C(){const o=v.find(u=>u.name===a.value);o&&(t.value=o.rows,s.value=o.cols,f.value=o.mines)}function D(o){/\d/.test(o.key)||o.preventDefault()}function w(o){o.inputType==="insertFromPaste"&&o.preventDefault()}function y(){if(a.value===G){const o=v.find(r=>r.name===a.value),u=b.find(r=>r.name==="rows"),e=b.find(r=>r.name==="cols"),n=b.find(r=>r.name==="mines");o&&u&&e&&n&&(t.value<u.min?t.value=u.min:t.value>u.max&&(t.value=u.max),s.value<e.min?s.value=e.min:s.value>e.max&&(s.value=e.max),f.value<n.min?f.value=n.min:f.value>n.max&&(f.value=n.max))}}function x(){y(),d({mode:a.value,rows:t.value,cols:s.value,mines:f.value})}return(o,u)=>(m(),g("div",te,[l("section",ne,[u[1]||(u[1]=l("h2",{class:"modes__title"},"Уровень сложности",-1)),l("ul",oe,[(m(!0),g(M,null,h(i(v),e=>(m(),g("li",ue,[N(l("input",{"onUpdate:modelValue":u[0]||(u[0]=n=>a.value=n),id:e.name,checked:e.name===i(c).name,value:e.name,onChange:C,name:"mode",type:"radio",class:"mode__input"},null,40,ie),[[z,a.value]]),l("label",{for:e.name,class:"mode__label"},$(e.label),9,re)]))),256))]),l("fieldset",{class:"modes__details details",disabled:a.value!==G},[(m(),g(M,null,h(b,(e,n)=>l("label",{key:n,class:"details__label"},[T($(e.label),1),N(l("input",{"onUpdate:modelValue":r=>e.model.value=r,onKeypress:D,onBeforeinput:w,onFocusout:y,class:"details__input",type:"number",min:e.min,max:e.max},null,40,de),[[A,e.model.value,void 0,{number:!0}]])])),64))],8,ce)]),l("button",{onClick:x,class:"play"},u[2]||(u[2]=[l("span",{class:"play__icon"},"🎮",-1),T("Играть")]))]))}}),ve=I(me,[["__scopeId","data-v-cd43b471"]]),ge=F({__name:"HomeView",setup(k){const _=R(),{settingsAreDisplayed:v}=V(_);return(d,c)=>i(v)?(m(),B(ve,{key:1})):(m(),B(ae,{key:0}))}});export{ge as default};
